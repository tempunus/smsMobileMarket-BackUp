{% extends 'base.html' %} {% block body %}
<div class="container">
  <!-- <h3>Consultar Dados Coletados do Equipamento</h3> -->
  <div class="row">
    <div class="col col-12">
      <form method="POST" action="" class="border p-1 mt-1">
        {{ form_ConsultarDados.csrf_token }}
        <!-- Tabela com Situação dos Módulos no Momento-->
        <!---------------------------------------------------------------------->
        <div class="row">
          <div class="col col-7">
            <h6 style="text-align: center; color: red">
              Status dos Módulos do Sistema
            </h6>
            <div id="div_tabPosicaoModulos">
              <table id="tabPosicaoModulos" class="table table-striped">
                <thead>
                  <tr>
                    <th style="text-align: center; vertical-align: middle">
                      Status
                    </th>
                    <th style="vertical-align: middle">Modulo</th>
                    <th style="vertical-align: middle">IP Modulo</th>
                    <th style="vertical-align: middle">Operadora</th>
                  </tr>

                  <tr></tr>
                </thead>

                <tbody>
                  {% for modAtv in listarModulosAtivo %}
                  <tr>
                    <td style="text-align: center; vertical-align: middle">
                      <!-- Mudar o Icone do status do Módulo -->
                      {% if modAtv.connected %}
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="35"
                        height="35"
                        fill="currentColor"
                        class="bi bi-wifi text-success"
                        viewBox="0 0 20 20"
                      >
                        <path
                          d="M15.384 6.115a.485.485 0 0 0-.047-.736A12.444 12.444 0 0 0 8 3C5.259 3 2.723 3.882.663 5.379a.485.485 0 0 0-.048.736.518.518 0 0 0 .668.05A11.448 11.448 0 0 1 8 4c2.507 0 4.827.802 6.716 2.164.205.148.49.13.668-.049z"
                        />
                        <path
                          d="M13.229 8.271a.482.482 0 0 0-.063-.745A9.455 9.455 0 0 0 8 6c-1.905 0-3.68.56-5.166 1.526a.48.48 0 0 0-.063.745.525.525 0 0 0 .652.065A8.46 8.46 0 0 1 8 7a8.46 8.46 0 0 1 4.576 1.336c.206.132.48.108.653-.065zm-2.183 2.183c.226-.226.185-.605-.1-.75A6.473 6.473 0 0 0 8 9c-1.06 0-2.062.254-2.946.704-.285.145-.326.524-.1.75l.015.015c.16.16.407.19.611.09A5.478 5.478 0 0 1 8 10c.868 0 1.69.201 2.42.56.203.1.45.07.61-.091l.016-.015zM9.06 12.44c.196-.196.198-.52-.04-.66A1.99 1.99 0 0 0 8 11.5a1.99 1.99 0 0 0-1.02.28c-.238.14-.236.464-.04.66l.706.706a.5.5 0 0 0 .707 0l.707-.707z"
                        />
                      </svg>
                      <!--
                                                                <img src="/static/icons_bootstrap/wifi.svg" width="25" height="25"  fill="currentColor" alt="Bootstrap">
                                                             -->
                      {% else %}
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="35"
                        height="35"
                        fill="currentColor"
                        class="bi bi-wifi-off text-danger"
                        viewBox="0 0 20 20"
                      >
                        <path
                          d="M10.706 3.294A12.545 12.545 0 0 0 8 3C5.259 3 2.723 3.882.663 5.379a.485.485 0 0 0-.048.736.518.518 0 0 0 .668.05A11.448 11.448 0 0 1 8 4c.63 0 1.249.05 1.852.148l.854-.854zM8 6c-1.905 0-3.68.56-5.166 1.526a.48.48 0 0 0-.063.745.525.525 0 0 0 .652.065 8.448 8.448 0 0 1 3.51-1.27L8 6zm2.596 1.404.785-.785c.63.24 1.227.545 1.785.907a.482.482 0 0 1 .063.745.525.525 0 0 1-.652.065 8.462 8.462 0 0 0-1.98-.932zM8 10l.933-.933a6.455 6.455 0 0 1 2.013.637c.285.145.326.524.1.75l-.015.015a.532.532 0 0 1-.611.09A5.478 5.478 0 0 0 8 10zm4.905-4.905.747-.747c.59.3 1.153.645 1.685 1.03a.485.485 0 0 1 .047.737.518.518 0 0 1-.668.05 11.493 11.493 0 0 0-1.811-1.07zM9.02 11.78c.238.14.236.464.04.66l-.707.706a.5.5 0 0 1-.707 0l-.707-.707c-.195-.195-.197-.518.04-.66A1.99 1.99 0 0 1 8 11.5c.374 0 .723.102 1.021.28zm4.355-9.905a.53.53 0 0 1 .75.75l-10.75 10.75a.53.53 0 0 1-.75-.75l10.75-10.75z"
                        />
                      </svg>
                      <!--
                                                            <img src="/static/icons_bootstrap/wifi-off.svg" width="25" height="25"  fill="currentColor" alt="Bootstrap">
                                                            -->
                      {% endif %}
                    </td>
                    <td style="vertical-align: middle">
                      {{ modAtv.descrModule }}
                    </td>
                    <td style="vertical-align: middle">
                      {{ modAtv.fixed_ip }}
                    </td>
                    <td style="vertical-align: middle">Claro</td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>

            <!--********************************************************************* -->
          </div>
          <div class="col col-5">
            <br />
            <br />
            {{ form_ConsultarDados.botao_submit_ConsultarDados(class="btn
            btn-primary mt-2") }}
          </div>
        </div>
        <!---------------------------------------------------------------------->
        <!--<legend>Consultar Dados Coletados</legend> -->
        <hr />
        <fieldset>
          <div class="sb-nav-fixed">
            <main>
              <div class="container-fluid px-4">
                <h1 class="mt-4">Lista de dados de Celulares Coletados</h1>
                <ol class="breadcrumb mb-4">
                  <li class="breadcrumb-item">
                    <a href="{{ url_for ('/') }}">Home</a>
                  </li>
                  <li class="breadcrumb-item active">Lista de Dados</li>
                </ol>
                <div class="card mb-4">
                  <div class="card-header">
                    <i class="fas fa-table me-1"></i>
                    Celulares Coletados
                  </div>
                  <div class="card-body">
                    <table id="datatablesSimple">
                      <thead>
                        <tr>
                          <th class="tg-yw4l">Id</th>
                          <th class="tg-yw4l">Data Recto</th>
                          <th class="tg-yw4l">Hora Recto</th>
                          <th class="tg-yw4l">Operadora</th>
                          <th class="tg-yw4l">Evento</th>
                          <th class="tg-yw4l">Emei</th>
                          <th class="tg-yw4l">Imsi</th>
                          <th class="tg-yw4l">Modulo</th>
                          <th class="tg-yw4l" style="text-align: center">
                            Msg Enviada?
                          </th>
                        </tr>
                        <tr></tr>
                      </thead>

                      <tbody>
                        <tr>
                          <td class="tg-yw4l">{{ dado.id }}</td>
                          <td class="tg-yw4l">{{ dado.data_received }}</td>
                          <td class="tg-yw4l">{{ dado.hora_received }}</td>
                          <td class="tg-yw4l">{{ dado.operadora }}</td>
                          <td class="tg-yw4l">{{ dado.evento }}</td>
                          <td class="tg-yw4l">{{ dado.emei }}</td>
                          <td class="tg-yw4l">{{ dado.imsi }}</td>
                          <td class="tg-yw4l">{{ dado.modulo }}</td>
                          <td class="tg-yw4l" style="text-align: center">
                            {% if dado.msg_sent %} Sim {% else %} Não {% endif
                            %}
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </main>
          </div>

          <!--
                           <div class="form-group">
                               <h6 style="text-align: center; color: red;"><strong>Lista de dados de Celulares Coletados</strong></h6>
                               <br>
                               <div id="div_tabdados">
                                    <table id="tabdados" class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th class="tg-yw4l">Id</th>
                                                <th class="tg-yw4l">Data Recto</th>
                                                <th class="tg-yw4l">Hora Recto</th>
                                                <th class="tg-yw4l">Operadora</th>
                                                <th class="tg-yw4l">Evento</th>
                                                <th class="tg-yw4l">Emei</th>
                                                <th class="tg-yw4l">Imsi</th>
                                                <th class="tg-yw4l">Modulo</th>
                                                <th class="tg-yw4l" style="text-align: center;">Msg Enviada?</th>
                                            <tr>
                                        </thead>
                                        <tbody>
                                            {% for dado in listarDados %}
                                                <tr>
                                                    <td class="tg-yw4l">{{ dado.id }}</td>
                                                    <td class="tg-yw4l">{{ dado.data_received }}</td>
                                                    <td class="tg-yw4l">{{ dado.hora_received }}</td>
                                                    <td class="tg-yw4l">{{ dado.operadora }}</td>
                                                    <td class="tg-yw4l">{{ dado.evento }}</td>
                                                    <td class="tg-yw4l">{{ dado.emei }}</td>
                                                    <td class="tg-yw4l">{{ dado.imsi }}</td>
                                                    <td class="tg-yw4l">{{ dado.modulo }}</td>
                                                    <td class="tg-yw4l" style="text-align: center;">
                                                        {% if dado.msg_sent %}
                                                            Sim
                                                        {% else %}
                                                            Não
                                                        {% endif %}
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                               </div>
                           </div>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>
-->
          {% endblock %} {% block scripts %}
          <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
            crossorigin="anonymous"
          ></script>
          <script src="js/scripts.js"></script>
          <script
            src="https://cdn.jsdelivr.net/npm/simple-datatables@latest"
            crossorigin="anonymous"
          ></script>
          <script src="js/datatables-simple-demo.js"></script>
          <script>
            $(document).ready(function () {
              $("#tabdados").DataTable({
                columns: [
                  null,
                  { searchable: true },
                  { orderable: true },
                  { orderable: true },
                  { orderable: false, searchable: false },
                  { orderable: false, searchable: false },
                  { orderable: false, searchable: false },
                  { orderable: false, searchable: false },
                  null,
                ],
              });
            });
          </script>
          {% endblock %}
        </fieldset>
      </form>
    </div>
  </div>
</div>
